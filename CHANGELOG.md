# 版本变更日志

这个项目的所有关键变化都将记录在此文件中.

此日志格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/),
并且此项目遵循 [Semantic Versioning](https://semver.org/lang/zh-CN/).

## [Unreleased]
## [9.0.6.7] - 2024-03-12

### Added

- 补充导出AppRouter
- 表单按钮新增识别界面行为操作标识
- 实体树表格视图（增强），支持界面行为刷新，界面行为组支持悬浮显示
- 下拉列表框类编辑识别forceSelection=false参数以实现可填可选
- 补充异常页面适配器

### Changed

- 用户消息提示弹框样式调整
- 多行文本字符过长自动换行
- 路由调整404改成异常页面，注册404异常页面，nav-pos跳转404改用error页面路由

### Fixed

- 修复跳转回首页下一级缓存的导航类视图时，浏览器后退会出现导航页本身的路由的问题
- 修复表格界面行为组列样式异常
- 修复通知消息弹窗出现横向滚动条
- 修复登录后跳转模态视图后关闭异常
- 修复多数据视图默认开启简单模式导致的临时数据处理异常问题
- 修复向导面板下一步操作，激活表单应静默保存，不应弹出提示信息

## [9.0.6.6] - 2024-03-10

### Changed

- 调整应用实体方法标识机制，支持多模式应用方法
- 调整应用实体请求远程的路径机制（默认新建，更新，删除等未调整）
- 调整用户消息弹框样式
- 调整门户快捷菜单项绘制

### Fixed

- 修复工具栏异常报错问题

## [9.0.6.5] - 2024-03-07

### Added

- 计数器识别全局数据变更消息，在计数器所归属实体触发数据变更事件时进行刷新
- 新增多行文本框支持高度自适应，支持是否显示限制长度参数
- 应用初始化时有refreshToken没有token的时候请求获取新token
- 数据关系分页部件、数据关系栏支持根据路由设置激活
- 添加门户定制标题

### Changed

- 看板项样式调整

### Fixed

- 修正 post 请求未正确携带 Srfdataaccaction Header 参数
- 修复数据导入组件未识别上下文、视图参数问题
- 修复实体级权限识别srfdataaccaction
- 修复表单直接内容回显异常

## [9.0.6.4] - 2024-03-04

### Added

- 监听mqtt消息弹出通知新增自定义类名，以便调整样式
- 新增界面域数据变更标识，实现多层级数据复杂情况下的脏检查
- 工具栏项有项显示逻辑时默认隐藏
- 消息通知解析url并打开对应视图方法统一
- 门户视图部件的插槽参数提供部件模型
- store,router-callack工具方法补充单元测试
- render,route工具方法补充单元测试
- 工具栏项支持直接内容
- 全局通知间距样式调整
- 编辑器支持enter事件

### Changed

- 视图加载中时，禁止关闭界面。避免初始化逻辑异常导致界面报错
- 优化视图在模态下的关闭逻辑，加载状态下视图禁止关闭。避免界面参数状态异常
- 优化编辑视图和操作视图的关闭逻辑，在包数据模式下子数据变更后界面也禁止关闭
- 优化日历高度自适应、日历项绘制
- 优化看板部件拖拽操作
- 表格展开收缩图标样式调整

### Fixed

- simple 模式下特殊选择结构下，嵌套数据批量新建异常
- 修复项显示逻辑无法获取view对象
- 修复数据选择绘制项布局面板未抛值问题

## [9.0.6.3] - 2024-02-29

### Added

- 浏览器标签页标题，未在环境变量中指定时取首页 title
- 表单自动保存模式支持，默认为全保存
- 界面打开标识新增 ROUTE_MODAL 识别路由模态打开模式
- 上下文新增标识 srfsimple，当此标识为 true 时前端服务层不识别 DTO
- 实体逻辑、界面逻辑，参数初始化识别类型`分页查询结果`
- 界面逻辑每个节点执行后，均设置`上一次调用返回`
- 表单分页部件支持计数器相关逻辑
- ui-domain,theme-util,script,raw-value-util.promise工具方法补充单元测试
- 路由模态模式打开界面修改浏览器标签页标题
- 树表格视图初始化，将继承表格参数设置给树表格
- 面板项支持轮播图（动态和静态）
- 日历图例位置调整到日历顶部
- 甘特图部件样式优化

### Changed

- 环境变量 AppTitle 不再给默认值
- 多数据视图默认开启 srfsimple=true，行编辑等默认都走简单模式
- 设置浏览器标签页标题工具方法，改取顺序为`环境变量 => 模型 => 浏览器默认`
- 树部件对应的实体数据变更时，树不会刷新
- 优化快速搜索触发，清空快速搜索值时触发重置搜索

### Fixed

- 修复甘特图打开引用视图主键丢失问题
- 修复图表无值时显示无值提示

## [9.0.6.2] - 2024-02-27

### Added

- 部件消息，支持标准消息标识后加 `_HIDDEN` 标识，隐藏对应的部件消息提示
- 新增甘特图部件打开引用视图
- 新增日历部件打开引用视图
- 新增部件宽高设置0到1之间按照百分比，大于1按照像素计算
- 站内信右下角菜单支持点击跳转
- value-rule、ui-domain-manager、verify中panel-dynamic-logic、form-dynamic-logic、de-rule-verify工具方法补充单元测试
- 适配全代码模式，补充模型里 appId 不存在时的处理
- 界面逻辑、实体逻辑输出 DEBUG 日志方便调试
- error-handler、modal 工具方法补充单元测试
- wf-helper、view-stack、verify中verify 工具方法补充单元测试
- 表单识别动态修改信息模式，在上下中有 srfreadonly 标识时。界面呈现为信息态
- 优化甘特图样式、甘特图单双击滑块触发数据激活及优化数据激活逻辑
- 新增日历部件打开引用视图能力
- 消息通知可点击图标修改、记住是否查询未读
- 添加切换浏览器标签页记录隐藏时间，超过5分钟验证登录
- 浏览器标签页名称识别 app json 中的 title 进行设置

### Changed

- 路由解析改成使用viewConfig
- 视图部件的插槽参数提供部件模型
- 导航占位跳转优化，若为空时第一次跳转默认为 replace 模式。避免浏览器后退出现空白页
- 表格无数据样式优化
- 通知消息计数器样式优化
- 菜单收缩时隐藏全局搜索
- login-view 和 router-shell 使用 viewConfig
- 路由打开视图工具类，识别 replace 参数
- 抽象 auth-guard 区分全代码和全动，runApp 提供替换 auth-guard 的可选参数
- 默认消息通知，样式呈现优化去除默认 ICON

### Fixed

- 修复表格导出时顺序错乱
- 修复甘特图删除异常
- 修复图表自适应界面异常
- 修复树表格项删除逻辑，子项删除时实体不正确
- 修复部件外部传递的上下文和视图只有一个变更时，另一个参数也被走了后续更新逻辑
- 修复选项操作视图未识别启用脏值检查模型
- 修复树表格操作列按钮换行后样式异常
- 修复分页导航视图，路由变更监听异常导致同一个视图打开多个数据时页面切换呈现异常

## [9.0.6.2-dev.0] - 2024-02-27

### Added

- 浏览器标签页名称识别 app json 中的 title 进行设置
- 补充模型里appId不存在时的处理
- 界面逻辑、实体逻辑输出DEBUG日志方便调试
- error-handler、modal工具方法补充单元测试
- wf-helper、view-stack、verify中verify工具方法补充单元测试
- 表单识别动态修改信息模式，在上下中有 srfreadonly 标识时。界面呈现为信息态

### Fixed

- 只有分页导航视图处于激活状态时才根据路由路径变化而切换分页
- 修复部件外部传递的上下文和视图只有一个变更时，另一个参数也被走了后续更新逻辑

### Changed

- 表格无数据样式优化
- 通知消息计数器样式优化
- 菜单收缩时隐藏全局搜索
- login-view 和 router-shell 使用 viewConfig
- 路由打开视图工具类，识别 replace 参数
- 抽象auth-guard区分全代码和全动，runApp提供替换auth-guard的可选参数
- 导航占位跳转优化，若为空时第一次跳转默认为 replace 模式。避免浏览器后退出现空白页
- 路由解析改成使用viewConfig
- 视图部件的插槽参数提供部件模型

## [9.0.0.6.1-alpha.3] - 2024-02-22

### Added

- bit-mask工具方法补充单元测试
- util,types,sync,string-util工具方法补充单元测试
- clone、color、download-file工具方法补充单元测试
- 脚本执行预置参数新增 ctrl
- 新增 plugin-static-resource.ts 工具类单元测试
- 新增 Handlebars 工具类单元测试
- 重定向视图支持在关联视图配置的打开模式
- internalMessage增加批量设置已读功能、监听mqtt消息后刷新未读条数
- 树选择视图支持通过srfkey回显数据
- 按钮添加成员样式类名
- 用户消息新增全部已读功能
- 新增甘特视图预制能力(新建行、行编辑切换、保存、保存全部)
- 表单多数据部件-重复器-表格模式，识别标签宽度配置

### Fixed

- 插件静态资源工具类，在给定带协议路径时输出异常
- 多数据部件经过点击搜索栏排序过就不需要默认排序
- 修复删除树节点数据时获取实体codeName不正确问题
- 修复甘特图新建行不保存的问题

## [9.0.6.1-alpha.1] - 2024-02-21

### Added

- 搜索栏默认选中，支持 treegrid（表格树）

### Changed

- 工具栏图标居中样式优化，修改呈现层级结构补充图标区域容器
- 卡片在卡片视图单击激活时不显示激活效果

### Fixed

- 修复消息通知已读触发两次的问题

## [9.0.6.1-alpha.0] - 2024-02-19

### Added

- 路由打开支持 replace 模式
- 甘特图部件增强新建行、删除能力
- 调整范围选择编辑器悬浮编辑模式下左右边距

### Changed

- 分页导航路由切换调整为 replace 模式
- 更正工具栏布局模型计算规则: 兼容移动端
- 代码表项补充userData代码表标记属性

### Fixed

- 修复消息通知，已读接口之后界面没有变化
- 修复气泡关闭没有等待执行完成
- 修复通知计数显示不全

## [9.0.6.0] - 2024-02-08

### Added

- 树节点数据对象添加 srfnodeid 属性，用于树选择视图回显
- 树部件支持配置部件参数 cascadeselect，选中父节点可以同时选中所有子节点
- 新增数据选择下拉视图导航上下文参数计算、编辑器参数 multiple 控制多选、抛值关闭下拉时机调整

### Fixed

- 修复 dataimport2 组件打包后高度异常
- 修复数据选择下拉视图编辑器，配置树选择视图，多选的回显异常

## [9.0.6.0-alpha.4] - 2024-02-07

### Added

- 编辑器支持直接css样式
- 消息的视图打开重定向模式识别 view:// 协议
- 编辑视图，识别标记数据打开模式配置
- 支持表单项直接样式
- 颜色选择编辑器，默认支持预定义颜色选择
- 树节点支持配置禁止选择

### Changed

- 优化数据选择同时有值项和文本项的情况下不加载数据，点击后才加载

### Fixed

- 修复树表格操作列和属性列界面行为组树节点刷新
- 修复 drbar 重复点击同一个分页的时候会重复触发跳转
- 修复 dataimport2 组件未选择列导入属性直接导入，页面卡死
- 修复模态点击右上角X关闭时没走视图关闭逻辑
- 修复树表格节点或者整体刷新后表格数据不更新
- 修复数据选择多选编辑器，信息态代码表呈现异常
- 修复分页导航脚本直接修改时，未根据 srfnav 直接切换导致后续点击异常

## [9.0.6.0-alpha.3] - 2024-02-05

### Added

- 后台界面行为打开视图识别 ModalOption 参数
- 编辑视图识别是否开启脏检查配置，模型默认为关闭状态
- 浏览器标签页标题跟随路由修改支持
- 编辑视图支持`编辑视图多表单`配置

### Changed

- 自定义搜索，类型: 值为空(Nill) 时不显示编辑器

### Fixed

- 修复工具栏配了权限，加载慢的时候会闪一下
- 修复表格修改展示列后没有自适应列宽

## [9.0.6.0-alpha.2] - 2024-02-04

### Added

- 预置视图逻辑 openData、newData 识别视图打开模式配置
- 自定义搜索栏的下拉列表编辑器支持直接回显文本，不需要请求数据
- notification 支持 isHtmlDesc 参数
- 界面逻辑支持返回值 return
- internalMessage 支持只查看未读数据、Text 类型的数据、接口报错不再弹提示
- 支持标记已读功能
- 收到 INTERNALMESSAGE 的 mqtt 通知后，点击铃铛时刷新数据
- 登录页标题，取应用标题模型

### Changed

- 调整 internalMessage 未读数据逻辑，单独请求获取
- 插件安装至 vue 实例改为使用钩子
- internalMessage 的 short_content 改成 content
- 将发布项目的文件除静态资源外全部移动至底包

### Fixed

- 修复表格列的行为组，更多菜单层级异常
- 门户图表部件识别插件配置

## [9.0.5.7-alpha.10] - 2024-02-02

### Added

- 支持树节点的子节点计数属性，当值大于0或者为true的时候是非叶子节点
- 部件支持列权限控制用于控制请求头附加srfdataaccaction参数
- internalMessage支持url和mobile_url属性
- 404页面样式调整、支持返回首页功能
- 悬浮编辑模式下的编辑器样式调整，统一间距
- internalMessage支持content_type的HTML类型,适配未读状态

### Changed

- 优化表单多数据部件表格无数据样式
- 路由模式打开视图不再等待打开视图的返回，避免按钮状态不同步。数据更新走消息的形式

### Fixed

- 修复树右键菜单，图标绘制不正确未对齐

## [9.0.5.7-alpha.9] - 2024-02-01

### Added

- 表格默认导出行为未指定导出模式时，默认导出当前页
- 视图和界面行为识别ModalOption 用于控制非路由打开的呈现
- 树表格支持搜索栏样式2
- markopendata 支持 mqtt 消息通信，提供对应的提示信息
- 重定向 view:// 支持 srfnavctx 参数同 url 模式一致
- 面板面板项、直接内容、按钮、容器几类成员支持直接样式内容
- 搜索栏的分组数据项配置的过滤条件的值支持识别类似`${context.srforgid}`格式的值,并且在自定义里该条件不能修改，且`${context.srforgid}`显示为"当前组织”，`${context.srfpersonid}`显示为"当前用户"

### Changed

- SearchBar 的 tooltip 由`保存`改为`保存分组`
- 调整表单多数据部件无数据样式：缩小无数据组件高度
- SearchBar的操作模式变更后，清空后面已有的值
- 调整视图默认 loading 遮罩层级为 11


## [9.0.5.7-alpha.8] - 2024-01-31

### Fixed

- SearchBar 的 JSONSchema 加载默认值改为 false

## [9.0.5.7-alpha.7] - 2024-01-31

### Added

- 表格开启列权限控制，请求数据时额外携带 srfdataaccessaction=true 参数

### Fixed

- 修复操作视图底部显示异常, 更正布局底部模型计算规则：忽略pc端计算逻辑

## [9.0.5.7-alpha.6] - 2024-01-31

### Added

- 支持 subtype 为 INTERNALMESSAGE 的 mqtt 消息
- 日历、时间轴识别日历数据源配置的最大节点数
- ibiz.notification 工具方法识别位置参数
- 飘窗、模态、抽屉等视图打开方式宽度高度 0-100 的时候算百分比，100 以上算像素 px
- 表格列控制根据状态，补充状态图标显示

### Fixed

- 修复视图布局根据模型配置进行隐藏时会闪烁问题
- 修复路由模态打开视图时父视图上下文未计算入内
- 修复信息行高不够导致较高英文字母[g、y]等显示不全
- 修复数据视图部件分组样式表无效
- 修复分页导航路由模式下，来回切换标签页后。使用浏览器的回退，页面标签未跟随切换
- 修复时间范围编辑器，在预览时未显示日历图标导致界面未对齐

### Changed

- 飘窗、模态、抽屉等视图打开方式，宽度支持0~100为百分比模式
- 优化视图绘制逻辑 在视图初始化时根据视图模型进行模型计算，把不需要的模型给删掉
- drtab 分页样式同步分页导航

## [9.0.5.7-alpha.5] - 2024-01-29

### Added

- 补充environment里devtool相关接口
- 刷新token之后重新取appdata
- 表格排序变更回调里如果排序条件相同，不触发查询
- 支持自定义搜索条件 searchcond 编辑器插件

### Fixed

- 修复input-number组件model-value值类型不正确警告

## [9.0.5.7-alpha.4] - 2024-01-29

### Added

- popover 工具接口支持传递原始组件参数
- 导航栏多数据部件刷新后，重新根据选中数据计算导航上下文等参数，有变化刷新导航视图
- 文件上传编辑器、图片上传编辑器，支持 ossCat 参数
- 支持异步操作结束后在右下角显示通知消息
- 支持右下角显示正在执行的异步操作的个数

### Changed

- 文件上传下载默认路径修改，支持应用级、编辑器级配置 ossCat，未配置时走原有逻辑。注:[编辑器参数osscat > 应用级参数 defaultOSSCat]

## [9.0.5.7-alpha.3] - 2024-01-25

### Added

- 动态视图请求新补充从视图参数中取 srfdatatype 传递
- 树表格列支持操作列，使用对应节点数据项的界面行为组绘制按钮
- token自动刷新之后用新的token重新连接mqtt服务
- 新增全局动画工具类
- 异步界面行为默认支持移动至铃铛动画
- 代码表支持预定义类型：实体主状态
- 所有的编辑器 editorItems 过滤掉自身，避免表格再一些情况下出现自身值项导致填充数据错误
- 文本输入框和多行文本输入框，在开启 isShowMaxLength 时显示用户可输入的最长字符和当前输入了几个字
- 面板按钮补充 tooltip 显示
- 调整下拉列表框未加载完代码表初始值，多选时为空数组，单选为空字符串
- 新增面板直接内容预定义类型 VIEW_MESSAGE，用于呈现位置为视图内容区的视图消息

### Changed

- 代码表只有是 predefinedType 为 OPERATOR 时，才从标识中截取掉模块去请求

### Fixed

- 修正分享的模态路由打开时，点击关闭模态直接返回了未打开应用之前的页面
- 修复视图消息无标题后未垂直居中

## [9.0.5.7-alpha.2] - 2024-01-24

### Fixed

- 修复下拉列表抛值异常问题
- 修复富文本只读态时上下留白不一致的问题和富文本控件在放大情况下，关闭按钮无效问题

## [9.0.5.7-alpha.1] - 2024-01-24

### Fixed

- 修复第一次加载时搜索栏参数不生效
- 修复联合主键保存之后报主键重复问题
- 修复富文本编辑器抖动

## [9.0.5.7-alpha.0] - 2024-01-23

### Added

- 支持路由模态打开模式

### Changed

- 404 页面兼容路由模态模式打开
- 下拉列表编辑器代码表请求时机优化

### Fixed

- 修复解析实体树节点获取通用数据后拿不到 srfkey、srfuf 等属性问题
- 选择链接编辑器字体大小调整，取表单字体大小
- 修复 completionrate 为 0 时显示异常

### PackageUpgrade

- monaco-editor@0.45.0

## [9.0.5.6] - 2024-01-22

### Added

- 树节点支持通过统一资源标识计算权限，无权限不显示树节点

### Fixed

- 修复树实体节点修改文本值报错
- 自动填充编辑器异常加载下拉数据

### Changed

- 逻辑调试节点日志输出级别调整为 info

## [9.0.5.4] - 2024-01-19

### Added

- 视图在搜索栏有默认分组情况下不触发默认加载，由搜索栏自己触发
- 插件 package.json 中 systemjs-importmap 支持声明 packages 用于声明外部依赖的配置，实现多层级插件依赖加载
- 文件上传组件增加聚焦、失焦事件
- 搜索栏分组标题字段更改、拖拽批操作传参更改

### Changed

- 搜索栏各类逻辑调整: 增加caption字段、清单根据视图来获取、批操作传参调整等
- 预定义代码表加载时标识更改，截取`__`后面的标识
- 如果启用了 mqtt 但是后台 appData 未返回 mqtttopic 不再报错，也认为不启用 mqtt
- 动态视图模型请求参数 srfkey、srfparentkey、srfparentdename、srfwftag 如果 url 有以上参数，优先使用 url 查询参不再计算

### Fixed

- 修复表单保存后通知数据类型错误 vo -> 实体源数据

## [9.0.5.3] - 2024-01-19

### Added

- 全局工具类新增 viewStack 可以查看当前已经激活的视图控制器清单
- 应用登录如果存在 refresh_token 刷新认证信息走 /uaa/refresh_token/${refreshToken} 接口
- 不启用动态实体时获取实体的 jsonschema 请求拼上 dynamodeltag
- 动态代码表支持样式表属性，颜色值属性
- 应用菜单、drbar、drtab、树支持计数器
- 树表格节点修改识别节点上的实体更新行为
- 下拉列表支持值项配置[注意: 配置值项后抛给绑定编辑器的值是文本，抛给值项的值为标识]

### Fixed

- 修复input-number组件清空值时未触发值变更、空字符串值转换不正确

### Changed

- 更正表单保存通知数据: 表单数据 -> 保存后数据
- 包数据在保存后重新回填包数据时，根据关系清理临时数据缓存。避免当前界面域下有多个包数据时，异常清空了其他包数据
- 异步消息调整，actiontype为空的按默认显示，点击弹出actionresult的json文本查看弹窗
- 异步消息进度条样式调整，增加进度背景色。没有stepinfo的显示”进行中“

## [9.0.5.3-beta.10] - 2024-01-18

### Added

- 添加表单分页部件维护当前激活的表单分页的state状态
- 执行导入行为时传入上下文，方便计算父级路径url
- 前端包数据模式: 支持关联删除、关联限制删除、关联数据置空
- 前端包数据模式: 支持简单事务，在关联删除、限制删除、置空等失败时，回滚已经修改的数据避免数据异常

### Changed

- 所有表单成员的事件不会冒泡
- 数据查询值为空时，不再做 EQ 对比。避免两个无值匹配上
- 表格列相关数据取值属性都用表格属性列名称
- 点击表单分页的头触发表单分页部件分页的点击事件

### Fixed

- 多语言文字修正

## [9.0.5.3-beta.9] - 2024-01-17

### Changed

- 适配复杂前端关系之下，数据重新加载时的缓存清理。避免在多层级时的数据异常
- 动态视图加载参数优化: 只保留 srfwftag、srfkey、srfparentkey、srfparentdename

## [9.0.5.3-beta.8] - 2024-01-15

### Added

- 实体逻辑处理参数支持源值类型为计算式

### Changed

- 优化动态视图加载,在请求视图模型的时候根据上下文算出srfkey、srfparentkey、srfparentdeanme传过去
- 优化登出，登出时清空 appData、orgData 避免 Vue 自动计算触发相关逻辑时状态不正确报错

### Fixed

- 修复上下文已有srfsessionid时，动态视图逻辑报界面域标识错误
- 修复异步消息mqtt通知过来时，同一条数据显示多次
- 修复动态工作流编辑视图，跳转操作视图时指定表单标识给错了

## [9.0.5.3-beta.7] - 2024-01-15

### Added

- 多应用模式下，支持应用视图根据 优先级(priority) 参数进行覆盖
- 支持面板项绘制器
- 界面域支持根据当前子父关系集合，计算出当前域下的父子关系集合
- 表格、树表格批操作工具栏、自定义按钮位置随表格头高度居中显示
- 树表格支持树模型的默认展开

### Changed

- 异步消息的actionresult如果是字符串，则不能点击，直接显示字符串内容作为错误信息。如果actionresult是个json字符串，解析其内容，如果存在错误，则显示失败，点击后打开详情页面可以下载错误文件
- 树形下拉选择，优化配置在节点展开时才绘制子节点

### Fixed

- 修复包数据模式下不执行计算属性逻辑
- 修复定制导入组件导入请求参数没有值时，仍然带上请求参数

## [9.0.5.3-beta.6] - 2024-01-15

### Added

- 工作流支持当视图参数里没有 processDefinitionKey，taskDefinitionKey 时，从实体数据属性里去获取，属性名称为 processdefinitionkey 和 taskdefinitionkey
- 定制导入组件表格属性映射下拉选择增加搜索

### Changed

- 打开应用视图时除了走路由的，其他情况toRouteDepth置为undefined
- 树表格支持行编辑等，类似表格的功能
- 生成路由路径时不删除toRouteDepth和currentSrfNav而是转为undefined，原因:上下文经过vue转换为不可配置属性，无法删除
- 动态视图在请求 json 时，不再携带 dynamodeltag
- 异步消息没有actiontype时不报错，actionresult不是数据的时候不能点击打卡详情页

## [9.0.5.3-beta.5] - 2024-01-12

### Added

- 插件支持加载时，从插件的 package.json 中读取额外的 systemjs-importmap 声明并加载

## [9.0.5.3-beta.4] - 2024-01-11

### Added

- 打开应用视图时除了走路由的，其他情况删除toRouteDepth
- 图表更新时不合并options，而是重新绘制
- 前端导入时转换行为参数传入组件使用
- 前端导入的请求支持带行为转换的参数过去
- 根据表格是否支持定制决定配置按钮是否显示

### Fixed

- 动态工作流视图取 srfwftag 异常
- 解决表格分组同时展开问题
- 解决面板按钮计算主状态不对问题
- 修复picker-dropdown组件未正常填充值项异常（合并数据时属性丢失）

## [9.0.5.3-beta.3] - 2024-01-09

### Fixed

- 根据关系做主数据附加时，主实体标识计算错误

## [9.0.5.3-beta.2] - 2024-01-09

### Added

- 支持表格隐藏列
- 部件类型新增上下文菜单具体实现
- 前端包数据自数据支持数据集查询条件，根据配置的数据集过滤呈现的数据
- 包数据模式支持嵌套数据集，解决自关系下的数据打包层级问题
- 支持表格单选时第一列8px左间距

### Changed

- MethodDto实例的创建统一用服务的`createMethodDto`方法创建，方便具体实体服务重写
- 删除 deCache 中的 select 方法，以后不再支持此模式的临时数据查询，都必须走平台配置的数据集
- 工作流启动时获取流程版本，需要补充传递 srfwftag 进行请求地址拼接
- 操作栏样式调整去除左右间距

## [9.0.5.3-beta.1] - 2024-01-09

### Added

- 自定义重定向标识，识别 view:// 协议模式。示例: view://{app}/{viewcodename}?srfwftag={wftag}

### Changed

- 树表格列和节点数据项的映射做在节点数据对象里

### Fixed

- 关系不存在外键值属性时，进行匹配保护走原有逻辑
- 动态视图在无数据主键时请求了数据

## [9.0.5.2] - 2024-01-08

### Added

- 视图支持动态模式，根据上下文和视图参数在视图呈现时独立请求根据参数实时计算的视图模型
- N对N批量新建时，可以配置视图动态参数PROPERTYMAP定义自定义的数据属性转换，格式为`来源字段1:转换字段1,来源字段2:转换字段2`

## [9.0.5.1] - 2024-01-07

### Added
- 支持表格列自定义排序

### Changed

- 接口关系路径计算补充判断 rsMode=2 时计算

## [9.0.5.1-beta.2] - 2024-01-05

### Added

- 环境变量新增市场地址 marketAddress
- 支持实体子系统引用视图，引导跳转市场地址，市场地址可以默认指定在environment里的marketAddress
- 数值框支持最大值最小值配置
- 菜单支持分隔项

### Changed

- 树节点数据的自己的属性名称都改成以`_`开头，防止和实体属性重名

### Fixed

- 解决重定向视图上下文里没有 srfsessionid 问题
- 修复自关系实体数据递归dto的时候，已经add的数据可能会被内层清空导致丢失

## [9.0.5.0] - 2024-01-04

### Added

- 树表格新增切换正常表格和树表格方法switchTreeGridShow
- 新增树表格切换正常表格和树表格逻辑（目前界面未添加按钮）

### Changed

- 匿名用户访问逻辑调整，不需要url传参数了，只要环境变量里配置了enableAnonymous,anonymousUser,anonymousPwd,访问视图时，如果该视图时匿名用户可以访问的则会自动用匿名用户登录访问，否则走正常登录。
- 重写css所有的gap样式，换成其他可兼容的写法
- 修改panel-tab-panel分页面板组件样式

### Fixed

- 修复更新时自关系的实体的父主键被改成了自己的主键
- 修复drtab部件配置了不输出默认编辑项，仍然会展示默认编辑项

## [9.0.5.0-beta.5] - 2024-01-02

### Added

- 支持通过实体的 jsonschema 添加搜索栏的过滤项
- 支持通过实体的 jsonschema 添加表格自定义列
- 支持表单自动保存只保存变化字段（注：模型未出，待模型出时再替换变量）
- 主题搜索默认配置结构，分组项数据按照searhconds结构来进行识别和存储
- 树节点上下文菜单仅有一个项，并且行为级别为常用操作时，树节点后方的...不显示
- 应用菜单的支持菜单项的适配器，去重写文本的绘制和点击事件逻辑
- 临时数据新建或更新时，根据界面域计算的关系进行父值填充
- ibiz-icon组件，识别图片模型时, imagepath 识别内容为 base64 或者 svg 标签的内容，同 rawContent
- 编辑器通用props新增部件参数controlParams
- 应用菜单的支持菜单项的适配器去重写文本的绘制
- 新增支持在表单配置控件动态参数editMode=hover时启用表单整体悬浮显示功能：无值显示横线，悬浮才显示编辑器

### Changed

- 多数据排序逻辑抽到基类中，各部件只提供自己的排序模型
- 搜索栏的过滤项的某些操作是不绘制编辑器的，如值为空,值不为空等

### Fixed

- 修复非根节点，拖动到根节点的前后时计算逻辑报错
- 修复拖入节点 inner 的情况，UI 组件有时会出现两个节点
- 修复应用菜单在 onCreated 之前使用 getAllItems 时报错
- 修复应用重定向视图无法跳转
- 修复应用重定向视图获取实体服务获取不到 srfsessionid
- 修复数据选择下拉 选择数据后值项抛出异常
- 修复时间选择器在表单项重置后，未清空值
- 修复picker选择器相关跳转按钮在选择器无值的情况下展示
- 修复面板按钮在不展示没有标题时还有标题的左侧间距
- 搜索栏分组超出宽度出横向滚动条

## [9.0.5.0-beta.3] - 2023-12-27

### Changed

- 所有退出统一调用 hub 中的退出
- 统一退出时，如果是匿名模式。去除匿名参数再退出

## [9.0.5.0-beta.2] - 2023-12-27

### Added

- 支持重复器表单项值属性名称
- 登录支持第一版匿名用户模式，在 environment.js 中配置匿名用户和密码，在 url 上携带 isAnonymous=true 查询参数则会根据 environment.js 指定的账户密码登录
- 新增表格部件，支持表格行列合并、列宽拖拽、列宽自适应、列宽自适应时自动调整列宽

### Fixed

- 修复html编辑器表单项更新,内容没有重置

## [9.0.5.0-beta.1] - 2023-12-26

### Added

- 代码表组件支持图标
- 支持嵌入界面的实体重定向视图
- 批操作工具栏、快速工具栏逻辑迁移到多数据基类
- 重定向视图跳转识别 appViewRefs 引用视图，避免自定义情况下不发布配置的引用视图到 redirectAppViewRefs 中
- 新增搜索栏是否后台分组判断：搜索栏样式为[搜索栏2]时启用
- 新增支持搜索栏分组拖动排序、是否启用相关逻辑
- 界面域新增配合 DTO 的当前域下的数据层级关系相关缓存，解决自关系情况下子和父有多层级关系匹配导致的包数据上传结构异常
- 新增富文本编辑器编辑态和只读态切换功能（enableEdit）、全屏功能（enableFullScreen），均有编辑器参数控制
- 新增滑动输入条编辑器文本显示功能（showText）及显示文本格式（format），均由编辑器参数控制
- 更新看板部件批量操作工具栏打开方式
- 支持表格批操作工具栏、快速工具栏：表格批操作工具栏放在表头、快速工具栏放在表格中间
- 下拉列表支持代码表样式、颜色、图片等显示
- 支持搜索栏分组拖动排序、是否启用逻辑

### Fixed

- 子应用视图重复注册导致顺序问题打开的视图不正确
- 修复数值编辑器初始化时，默认值为空字符串提示Vue报错,且错误展示为数字0

### Changed

- 界面行为的附加界面逻辑（执行之后）放在后续界面行为之前执行
- 重定向相关逻辑代码调整，抽象出跳转前的处理逻辑，供嵌入界面使用
- 自定义重定向标识，默认转大写匹配
- 优化甘特图（继承树表格增强）

## [9.0.4.17-beta.0] - 2023-12-24

### Added

- 支持多数据部件静默加载更多
- 实体服务扩展注册支持
- 搜索栏新增配置分组来切换表格主题功能
- 表格下方增加控制列显隐开关
- 标签有代码表时加载代码表后再显示文本
- 支持树部件增强，相关逻辑基于树部件的逻辑扩展实现
- 界面行为组识别行为级别、根据行为级别决定是否收缩【行为级别为不常用状态自动分成一组，其他状态平铺】
- 表格特殊识别界面行为组【行为级别为：不常用或一般操作自动分成一组，常用操作悬浮显示，关键操作一直显示】

### Fixed

- 修复动态样式表显示后无法动态隐藏
- 修复EditView3视图打开分页后，刷新浏览器，参数丢失的问题

## [9.0.4.16] - 2023-12-21

### Added

- 多数据部件服务新增批量更新方法 updateBatch

### Fixed

- 路由跳转时，在多应用模式下应用域指定不正确导致视图未能跳转

## [9.0.4.15] - 2023-12-20

### Added

- 更新甘特图部件依赖
- 表格操作列的界面行为组支持配置的提示信息
- 甘特图部件支持滑块拖动更新数据，甘特图滑块支持布局面板
- 看板部件支持分组界面行为组，快速操作工具栏，批量操作工具栏，全屏显示
- 增强gantt部件样式适配主题，甘特图更新数据能力
- 增强看板部件支持快速操作工具栏，批操作工具栏，全屏能力

## [9.0.4.14] - 2023-12-19

### Added

- 表单多数据部件，不管什么类型，在内部数据发生变更的时候触发表单对应的表单项的数据变更，进而触发表单的自动保存。
- 树节点如果配置了上下文菜单且里面有行为级别为【常用操作】的界面行为项，节点点击之后的逻辑改成触发该行为

### Fixed

- 临时修复，多数据部件新建的数据在主表单保存的时丢失
- 单项数据选择值项发生变化时，回显对应文本值

## [9.0.4.13] - 2023-12-18

### Added

- 树支持编辑模式
- 表格列识别配置界面行为组
- IDataEntity 新增属性 srfpkey
- 多语言转换抽到对应控制器中，以便UI直接使用
- 支持部分组件多语言转换

### Changed

- 全局预置 opendata、newdata 界面逻辑改用类型判断触发，不再使用名称
- 修改全局配置里首页禁用分页导航参数名称，从noNavTabs改成disableHomeTabs
- 增强看板视图，增强看板分组自动分组、代码表分组逻辑及UI呈现
- 新增支持甘特图部件
- deService 新增方法 selectLocal 查询临时数据
- 在解构 DTO 时，附加属性 srfpkey 为父数据主键，用于在重新构造 DTO 时做递归关系打包使用

### Fixed

- 表格服务转换界面属性映射，因使用 degridDataItems 错误转换丢失表格列配置，改为 degridColumns 转换

## [9.0.4.12] - 2023-12-14

### Added

- 视图和部件补充 state 参数 activated 记录激活状态
- token 认证续期时，识别 rememberMe 模式避免续期后关闭浏览器认证直接过期
- 支持全局配置确认首页是否采用分页导航模式
- 视图和部件的 useController 补充 onActivated、onDeactivated 生命周期修改激活状态

### Changed

- 表单发送数据变更事件，不再局限于路由下只要数据变更就会发送
- 多数据部件在接受到数据变更事件后，若未激活则记录变更等激活时再进行数据刷新
- 联合主键在新建模式下，联合主键计算时的空值给 `__empty__`
- 新建更新默认值逻辑放到表单部件服务层处理

### Fixed

- 修复下拉列表代码表未加载完成前显示id值异常
- 修复下拉列表只读态下显示文本计算不正确异常（未处理树型数据）

## [9.0.4.11] - 2023-12-13

### Added

- 支持实体首页视图
- 界面行为适配器支持界面行为类型+标识[type_tag]注册
- 新增系统登出界面行为适配器
- 支持表单项的动态标题
- 新增甘特图部件支持
- 表单项更新识别是否显示处理提示
- 向导维护每一步表单加载和保存后数据，用于最后完成时请求参数
- 根据向导表单是否配置了上一步操作决定是否调用相关请求
- 支持实体配置联合主键时的服务层临时数据的新建和更新逻辑
- 支持实体首页视图，调整左右关系的回显
- 支持表单项的动态标题
- HTML编辑器适配自适应高度

### Fixed

- 修复首页菜单横向样式污染全局 el-menu 组件

## [9.0.4.10] - 2023-12-11

# Added

- 代码表组件，呈现默认分隔符补充为[、]

### Fixed

- 登录页登录失败后，用户名组织 id 拼接异常
- 记住我功能 cookie 过期模式设置错误导致重新打开时丢失

### Changed

- 延长认证信息时长功能，挪动至 IAuthService 实现

## [9.0.4.9] - 2023-12-08

### Added

- 默认登录页识别 orgid 当面板数据中有 orgid 时，username 传递值为 username@orgid
- 新增依赖 @ibiz-template/cli，实现远程插件依赖包清单下载至本地指定目录功能
- 新增 scripts 命令 download-pkg 从 ibiz-download-pkg.config.ts 配置文件下载指定的远程插件清单
- 实体服务补充 Temp 相关接口方法，方便调用
- 补充甘特图视图和甘特图部件基础结构

## [9.0.4.8] - 2023-12-07

### Changed

- 合并子应用应用菜单时，递归合并同名的菜单项，并集非同名菜单项
- 所有执行界面行为时补充传递 appId 标识，避免多应用下导致行为找不到

### Fixed

- 修复多表单模式下，多表单属性代码表值如果是小写的时候匹配不到对应的新建视图

## [9.0.4.7] - 2023-12-07

### Fixed

- dsl 模型转换包应用子视图清单转换异常

### Changed

- 分组面板头部的分割线样式调整，和标题内容对齐
- environment.js 默认开启多应用模式 hub=true

## [9.0.4.6] - 2023-12-06

### Added

- 支持子应用(多应用)模式
- 403时补充弹窗提示，点击确认后退出登录
- 分页导航视图识别视图动态参数 srfdefaultnav，指定默认打开的分页面板标识（视图代码名称+分页视图面板名称）的全小写

### Fixed

- 修复分页导航视图参数传递给了导航的视图
- 修复插件路径计算异常，丢失前半部分

### Changed

- 上下文声明 srfappid 改为非可选项，适配多应用模式
- 优化整体模型加载方式，支持多应用子应用模式
- 修复大量 appId 传参不正确
## [9.0.4.5] - 2023-12-05

### Added

- 识别主题给定的额外参数，用于覆盖基础变量
- 导出界面行为处理器基类
- 动态代码表数据属性后台返回值如果不是对象格式字符串，控制台给提示而不阻止代码运行
- 插件优化加载，单一插件多个地方调用绘制同时加载避免出现重复加载
- 树节点支持绘制器布局面板绘制

### Fixed

- 修复工具栏有二级时更新按钮状态报错

## [9.0.4.4] - 2023-12-04

### Added

- 树上下级过滤参数统一转小写
- 前台界面行为处理模式：用户自定义时执行脚本补充view参数
- 新增主题设置工具对象 ibiz.util.theme
- 添加树部件的默认布局面板，快速搜索由树部件自己绘制
- 表格编辑列支持重置项
- 表格行单击的时候只选中一行
- 注册面板预置类型直接内容编辑器
- 重复器新建支持指定位置

### Changed

- 删除树导航布局里的快速搜索
- navPos 缓存优化[视图标识 + 主键]作为缓存标识，避免自增主键造成缓存标识重复
- 远程插件本地开发加载方式优化

### Delete

- 删除首页下对应用主题的配置识别

### Fixed

- 修复搭载平台适配器基础路径异常

## [9.0.4.3] - 2023-12-01

### Added

- 前端界面行为支持定制导入
- 界面逻辑支持执行脚本节点
- 表格行编辑支持文件、图片上传

### Changed

- 导航上下文参数转换，取值转小写再取值适配平台模型忽略大小写给值模式

### Fixed

- 单项数据主键或者多项数据主键的界面行为，在新建状态界面时未正确禁用
- 解决图表X轴类型为时间时echarts报错BUG
- 修复多数据部件表格，列表加载不到临时数据

## [9.0.4.2] - 2023-11-29

### Fixed

- 多数据部件数据变更后同步至表单中，以便后续触发表单项更新时数据正确

## [9.0.4.1] - 2023-11-29

### Added

- 新增全局工具方法 ibiz.util.action 对应 UIActionUtil

### Fixed

- 修复多数据部件表格，列表等主表单加载的时候不刷新的问题

### Changed

- 非主要依赖 vite 相关升级至 5.x 版本
## [9.0.4.0] - 2023-11-28

### Added

- 支持搜索表单保存条件
- 部件布局面板模型支持配置（在部件逻辑里配置预定义类型：绘制器，绘制器模式：布局面板，配置布局面板）
- 新增报表视图、报表部件实现（用户自定义、用户自定义2）实现
- 支持数据集合和实体行为的前端插件
- 表格列 DEFTREEGRIDCOLUMN 类型注册为属性列

### Changed

- 表单多数据部件重构
- 认证过期跳转登录页后，重新加载页面需要重新加载为无权限模型
- 面板部件抽成公共组件

### Fixed

- 修复向导表单上一步操作时 表单tag 异常
- 修复向导表单下一步操作找不到步骤表单
- 修复DTO的listMap属性，没有在表单里修改的时候保存被置空

## [9.0.3.5] - 2023-11-24

### Added

- 识别用用配置参数直接覆盖 environment.js
- 新增视图call流程撤回标识`WF_WITHDRAW`
- 新增搭载平台适配器
- 前台界面行为打印和导出支持额外导航参数
- 饼图、漏斗图默认文本格式调整
- 登录接口添加rememberme参数
- 支持流程撤回
- 输入框自动填充根据编辑器参数决定
- 文件上传单项的时候，上传一个后就去除上传按钮
- 登录页记住我功能改为向后台传rememberme布尔值

### Changed

- 默认插件仓库地址改为公司私有仓库 unpkg cdn

### Fixed

- 插件路径拼接 pluginBaseUrl 未处理 http 或 https 开头路径导致加载异常
- codeList 呈现组件未识别代码表值分隔符
- 修复工作流操作视图 操作后出现关闭确认弹窗
- 表格列模型配置全大写时，表格数据未正确显示

## [9.0.3.4] - 2023-11-23

### Added

- 日历支持时间轴样式（前端排序、请求参数不用带开始结束时间）
- 支持图表导航相关（封装图表数据、根据序列计算导航相关参数）

### Fixed

- 计算实体 codeName2 时未转小写导致转换异常
- 修复后台返回时{}时重置成undefined，导致的报错

## [9.0.3.3] - 2023-11-21

### Added

- method 支持 simples、dto 打包，不做特殊处理
- 新增工具方法 getPFPlugin 根据标识从应用查找模型
- 应用实体服务补充默认实体方法和数据集调用实现
- 表格支持实体数据导出相关
- 前台界面行为支持打印、导入、导出等功能
- 添加搜索表单默认部件布局面板

### Changed

- 修改全局错误使用 Application 实例对象声明类型，应使用 IAppService
- 搜索表单搜索和重置按钮走预置界面行为流程

### Fixed

- 修复首页路由变更回空白页时，缓存视图没有消失

## [9.0.3.2] - 2023-11-20

### Fixed

- 修复表单项值属性名称配置后相关逻辑取不到值的问题
- 修复自定义参数解析错误，上下文和视图参数反了
- 解决Markdown编辑器在直接内容绘制时报错
- 修复菜单跳转已打开的视图时，没有恢复上一次打开的子页面

### Added

- 添加表格列的超出呈现的全局配置，支持超出省略号和tooltip和超出换行两种呈现
- 树动态实体节点支持叶子节点标识属性
- 支持面板图片容器，面板图片容器背景居中

## [9.0.3.1] - 2023-11-16

### Fixed

- 修复异步消息请求返回为undefined时，界面绘制报错

## [9.0.3.0] - 2023-11-16

> <div style="background: #e6a23c;color: #fff; padding: 8px;">
> <h3>警告</h3>
> 为兼容Safari浏览器，所有第三方外部依赖都用systemjs的模式重新编译打包，可能会产生未知影响。
> </div>

### Added

- 新增外部依赖: loglevel、loglevel-plugin-prefix
- 选择多数据视图ui状态接口新增selectedData
- 多数据部件对应的表单属性值变更时，如果类型是非重复器的时候，多数据部件重新加载
- 支持地图视图相关接口
- 支持表单成员触发部件逻辑，目前支持点击、值变更、聚焦、失焦
- 支持dto里转换数组与listMap
- 编辑器,面板属性项和表单项支持enter相关部件逻辑

### Changed

- 修改外部依赖为 systemJs 格式: ramda、lodash、qs、axios、dayjs、async-validator、path-browserify、qx-util、handlebars、interactjs、sortablejs
- HttpResponse 中 axios 引入方式变更，处理 safari 浏览器兼容问题
- net 请求类在后台返回空字符串时，任 undefined 无值处理
- findModelChild 匹配模型标识，忽略大小写匹配
- handlebars 异步导入适配导入模块
- AppDataEntity 传入数据无值时，默认按照空对象处理避免构建异常

### Fixed

- 修正因外部依赖为非 systemJs 格式包，safari 解析不正常导致的界面无法显示
- 修复多数据视图双击/单击激活编辑视图后保存成功后关闭不刷新
- 修复树导航和树视图刷新的时候，不传额外参数的时候代码报错，导致刷新失败

## [9.0.2.17] - 2023-11-13

### Added

- 新增面板属性项优先匹配[FILED_预置类型]，未匹配到匹配编辑器
- 多数据部件控制器提供刷新方法refresh
- 支持面板分组容器

### Changed

- 当界面行为配置关闭视图的时候，后执行后续界面行为不会阻塞当前界面行为的返回
- 时间范围、数值范围选择编辑器的空白提示识别;分号分割开始与结束的提示

### Fixed

- 修复自动保存后表单主键没有更新后台回来的主键
- 修复面板属性格式化异常

## [9.0.2.16] - 2023-11-11

### Changed

- 部件接口补充 scheduler 部件逻辑调度声明
- 面板项基类实例化对象声明，不可为示例改为接口
- 面板基础状态属性新增 required 参数，是否必填
- 表单自动保存之后不合并后台数据，只回填更新时间属性

### Fixed

- 修复表单保存，延后执行之后丢失入参

## [9.0.2.15] - 2023-11-11

### Added

- 支持状态向导，初始化时根据状态属性决定首表单，并且上一步下一步都根据状态属性去找下一步表单是什么
- 多编辑表单视图面板删除更新逻辑调整
- 多编辑表单视图面板添加的按钮可以通过配置布局面板来决定

### Fixed

- 修复分页导航视图非上方显示分页的时候，头部没内容时显示空白
## [9.0.2.14] - 2023-11-09

### Fixed

- 修复实体多项数据选择视图（左右关系）点击导航失效

### PackageUpgrade

- axios@1.6.1
- element-plus@2.4.2
- interactjs@1.10.20
- vue@3.3.8
- vue-i18n@9.6.5
## [9.0.2.13] - 2023-11-08

### Added

- 添加处理浮点数相加工具类方法
- 工作流流程接口路径适配实例标识
- 动态视图消息按钮文本
- 树导航节点没有配置导航视图的时候不触发节点点击后续逻辑
- 图表、表格计算合计数据的时候考虑浮点数情况使用封的工具方法
- 导航视图路由跳转时只带srfnav且找不到匹配的数据去导航时，跳转404页面
- 卡片支持栅格布局
- 树导航的节点没有配置导航视图的时候，点击是切换节点的展开状态

### Changed

- 日历项集合的查询条件标识改成srfstartdate和srfenddate
- 卡片和日历没有文本值的时候不显示---
- provider不导出

### Fixed

- 修复树导航切换路由srfnav时树节点的的选中回显
- 修复分页导航刷新不显示子页面
- 修复动态代码表节点导航参数计算错误
- 修复界面行为数据目标是多项数据时，打开选择视图选中后，后台服务丢了srfactionparams
- 修复导航删除数据后没有数据时，显示空白页时路由没有变更
- 解决分页导航视图不显示标题时分页导航面板也不显示的bug
- 修复卡片导航删除后，跳空白页，控制台报错

## [9.0.2.12] - 2023-11-06

### Added

- 支持数据选择类、标签编辑器增强相关功能
- 调整表单多数据部件，没有按钮时部件宽度撑满样式
- 表单多数据部件抛出控制器时机改为created后

### Changed

- 把通用组件抽到vue3-util包

### Fixed

- 修复表单多数据部件保存时值校验报错问题
- 修复表单多数据部件项控制器里合并父级表单模型时影响ctx注册控制器BUG
- 修复外部修改路由的srfnav跳转时，代码控制台报错
- 修复表单关系界面嵌入视图遮罩的层级过低，无法遮盖表格操作列
- 修复工具栏绘制额外按钮逻辑判断问题

## [9.0.2.11] - 2023-11-03

### Fixed

- 修复重复器值规则无效
- 修复卡片，列表，看板等配置了多选不生效,由于模型的默认值是多选，默认没有配置的卡片视图会变成多选。单选需要手动配置。

### Changed

- 表单项不启用逻辑位置迁移
- 工作流行为操作后刷新todo实体数据

## [9.0.2.10] - 2023-11-02

### Added

- 预置界面打开逻辑支持，索引实体根据索引类型数据打开
- 按钮loading时如果有配置图标则不显示图标

### Changed

- 调整面板，数据容器的数据变更触发机制，支持逻辑和脚本里直接修改数据也能触发后续逻辑
- 地图项改成用用界面形式区分，目前只支持点和区域。
- 地图区块没有值的颜色调整成蓝色，抽离区块颜色，边框颜色，悬浮区块颜色方便后续调整

### Fixed

- 修复地图json路径异常
- 修复数据选择AC query过滤失效问题
## [9.0.2.9] - 2023-11-01

### Added

- 新增数据文件工具类（用于导入导出）
- 新增多数据部件导入逻辑
- 多数据部件支持表单项更新、内建操作控制新增、删除按钮
- 实体行为触发前执行属性[变更触发]逻辑
- fetch 行为请求后支持触发属性[计算值]逻辑
- 地图部件支持动态参数配置默认呈现的区域，地图json的基础路径，区域编码是否是字符串
- 实体数据集树节点数据识别文本属性和标识属性
- 面板，面板数据容器里的数据根据子面板属性做映射
- 自定义登录页支持enter登录
- 界面逻辑[前端插件]节点支持

### Changed

- excel文件工具类名称更正
- 表格导出逻辑代码表转化逻辑注释
- 表格导入逻辑优化

### Fixed

- 修复表单分组加载后没有计算动态逻辑
- 修复表单成员逻辑里改了隐藏，并且没有配置动态逻辑的时候，数据变更后成员的显示隐藏又变回来了
- 修复单项数据容器，多项数据容器的面板属性修改值丢失响应性和动态逻辑
## [9.0.2.8] - 2023-10-31

### Added

- 工作流[启动、提交]补充应用内部通知刷新表格
- 调整表单多数据部件无标题时样式
- 支持地图部件

### Changed

- 多数据部件接受事件刷新界面补充 300ms 防抖
- 行编辑保存时不出成功提示，只有报错时才出提示

### Fixed

- 修复面板成员逻辑里改了隐藏，并且没有配置动态逻辑的时候，数据变更后成员的显示隐藏又变回来了

## [9.0.2.7] - 2023-10-30

### Added

- 柱状图、折线图、散点图单个序列并且该序列分组数据只有一条时，不用显示图例
- 表格属性列数值类型时间型在没有值的时候不显示Invalid Date
- 多数据部件新增 srfserialnum 临时属性，加载后按照顺序多数据控制器自行补充，仅供界面呈现使用
- 全局配置新增 theme 主题配置
- 根据应用模型自动修改全局参数是否为移动端应用
- mpicker地址栏SIMPLE类型格式JSON字符串时报错Log控制台提示
- 只读状态下的编辑器文本样式统一
- 补充simplist配置缺失报错
- 首页引擎识别全局 theme 配置

### Fixed

- 修复图表各序列生成自身数据时返回数据不正确问题
- 解决controlVO主信息取值取错问题
- 修复选择视图面板重算视图参数逻辑报错
- 工作流动态表单匹配未区分 移动端 or 网页端 导致动态界面在网页端失效

## [9.0.2.6] - 2023-10-27

### Added

- 添加各种类型门户部件（操作栏、网页、列表、直接内容）
- 数字相关编辑器参数全部改小写（配合新平台预置）
- 支持部件内部动态参数
- 支持行编辑全打开模式

### Changed

- 路径参${name}模式匹配正则修改，规避 safari 不匹配零宽正则规则
- 部件的视图参数和上下文隔离，且部件能拿到视图的参数。

### Fixed

- 表单多数据部件，表单数据更新后数据呈现异常未及时更新数据

## [9.0.2.5] - 2023-10-27

### Added

- 支持图表门户部件

## [9.0.2.4] - 2023-10-26

### Added

- 实体服务新增 aiChatHistory 方法，获取 AI 聊天历史记录
- 支持表单逻辑（部件事件触发、项显示逻辑、项启用逻辑、项空输入逻辑）
- 多行文本框，AI 自动填充匹配历史记录

### Changed

- 请求 url 进行 encode 转码，避免特殊字符异常
- AppDataEntity,ControlVO新增tempsrfkey,只在初始化的时候赋值，有主键赋主键的值，没有赋uuid，如果srfkey和tempsrfkey一致则是更新，否则是新建。
- 删除srfsourcekey，功能由tempsrfkey替代
- onCreated,onMounted,onDestroyed的事件触发逻辑完成之后修改视图，部件的对应状态

### Fixed

- 修复表格新建时修改主键属性时会导致频繁失焦的问题

## [9.0.2.3] - 2023-10-25

### Added

- 支持远程插件加载样式文件

## [9.0.2.2] - 2023-10-25

### Added

- 表单按钮大小随父
- 分组面板右侧工具栏样式调整
- 表单错误信息字体大小调整为12px

### Changed

- 视图引擎初始化，engineCat 排除 CTRL 类型初始化。避免界面异常

### Fixed

- 修复给后台的数据里多传了srfkey，srfmajortext
- 修复克隆res时丢了data的结构

## [9.0.2.1] - 2023-10-25

### Added

- 界面逻辑和实体逻辑理，数组类型逻辑参数变量的属性配置识别为数组下标
- 卡片，列表支持分页

### Changed

- 服务层传递多项数据时，不做dto转换

### Fixed

- 解决短时间内多次请求数据时controlVO获取原始数据不正确问题
- 修复表格动态列代码表加载时间长导致第一次表格绘制的呈现异常
- 修复界面行为配置多项数据主键时，主键属性名称错误
- 修复选择表格、选择卡片多加载一次问题
- 修复分页关系切换后刷新回显异常
- 修正表单多数据部件，重复器表格添加按钮zIndex层级不正确问题

## [9.0.2.0] - 2023-10-23

### Added

- 支持动态代码表的附加查询条件
- 消息中心，command 类型新增 asyncAction 模式直通
- 支持动态代码表和静态代码表各项配置，动态代码表支持树形
- IAppViewConfigService 补充 getSync、has 方法，可同步获取已存在的视图配置参数，判断配置是否存在
- 支持快速搜索代码表拿代码表项数据做额外过滤，且支持%形式的转换
- 服务层支持数组数据
- 日历数据没有文本的时候显示---

### Fixed

- 修复新建时关系界面不加载时，表格列的代码表没有加载导致绘制有问题
- 修复多数据新建，编辑取消操作导致关闭视图后依然刷新多数据的问题
- 修复菜单过长滚动时收缩按钮定位错误问题
- 修复新增页签时激活页签没有显示出来问题
- 修复数值范围选择回显问题
- 修复表格聚合列样式异常
- 卡片,列表悬浮背景色,选中背景色与列表统一

### AddPackages

- mqtt@5.1.3
- 应用支持 mqtt 服务，Environment 新增 enableMqtt、mqttUrl 用于控制是否启用和地址

### PackageUpgrade

- element-plus@2.4.1
- pinia@2.1.7

## [9.0.1.37] - 2023-10-18

### Added

- 支持多表单编辑视图、多表单编辑视图面板
- 支持首页收缩时，调整收缩后菜单、搜索栏、头像、标题等面板部件的样式
- 识别属性的字符长度，最小字符长度，最大值，最小值配置，出对应的值规则校验

### Fixed

- 修复门户部件界面行为组状态计算报错

## [9.0.1.36] - 2023-10-17

### Added

- 主要颜色、次要颜色、第三颜色、信息色、成功色、危险色、警告色，每种状态新增文字颜色变量用于实现和底色的对比
- 支持搜索栏过滤项的相关配置
- 气泡打开支持高宽变更后，自动更新位置
- 移动端多数据部件支持分组

### Changed

- 多行文本触发 AI 聊天框按钮，颜色匹配主题

### Fixed

- 修复post请求不带body时后台接口报错
- AI 聊天框在视图关闭后未自行关闭
- 修复工具栏下拉的项没有识别禁用状态
- 修复直接内容的svg图片结尾带换行符时图片显示不正确
## [9.0.1.35] - 2023-10-16

### Added

- 应用登录视图调整预置呈现
- 多行文本支持 AI 聊天自动填充模式

### Changed

- 界面逻辑的数据对象变量类型的属性不再转成全小写，直接使用填入的属性名称
- 界面逻辑和实体逻辑，统一识别名称是context和viewParam的逻辑参数，用作实体逻辑，实体行为和界面行为等节点的上下文和视图参数的来源，如果没有配置则使用逻辑外部传入的原始上下文和视图参数
## [9.0.1.34] - 2023-10-12

### Added

- 补充部分面板属性，面板直接内容，面板容器，面板按钮等面板成员的点击事件触发
- 补充面板项逻辑的执行逻辑类型-界面行为
- 面板部件补充成员事件，用于监听成员的各种事件
- 悬浮窗口呈现模式相关接口
- 界面逻辑的链接条件自定义目标属性和条件值类型【元数据对象属性】的条件值，支持searchForm.state.visible的脚本形式取值
- net 请求封装新增 sse 支持
- 实体服务补充 aiChatSse 接口，用于单次 ai sse 聊天会话
- 实体服务补充 execAc, 特殊执行 ac 请求
- 界面打开方式，新增可拖拽悬浮窗模式

### Fixed

- 修复面板项逻辑配置的部件逻辑没有触发的问题
- 修复卡片点击代码报错问题
- 修复界面逻辑链接条件目标参数属性拿不到值的问题
- 修复界面逻辑链接条件不配目标参数属性时，没有只判断目标参数的问题
- 修复部件参数解析报错问题
- 修复时间范围选择器回显BUG

### Changed

- 表单和多数据部件接口对外暴露的能力参数调整，全部改成一个入参，原来的参数变成其属性，补充context，viewParams,data三个可选属性，分别用于附加额外的上下文，视图参数和替换执行的数据
- 编辑器使用的视图参数只带转换出来的部分
- 分割面板容器隐藏子面板时移除占位padding

### AddPackage

- interactjs@1.10.19
## [9.0.1.33] - 2023-10-10

### Added

- 参数标识是layoutPanel的界面逻辑的逻辑参数特殊处理，是一个包含所有面板成员的控制器的对象，对应的属性名称就是面板成员的标识
- 界面逻辑设置变量的时候，目标参数的属性也支持使用xxx.aaa的脚本形式赋值
- 搜索表单loadDraft返回数据时根据表单项过滤填充自身的数据
- 颜色选择器的输入框不能在文本框内直接修改
- 选择视图（左右关系）选中数据后不丢失原有的视图参数
- 树形代码表时，父代码项禁止选择时，文本颜色正常，只是不能选择出禁用图标
- 树节点刷新增加整个树部件的加载动画
- 当total<=size情况下，卡片禁用加载更多

### Changed

- 实体逻辑使用的数据，上下文，视图参数都用拷贝，避免影响界面

### Fixed

- 修复树节点，子有展开项，父折叠后，操作其他节点时，该父节点展开又关闭
- 修复当配置图片类型直接内容，svg的内容字符串的格式有些不是以"<svg>"开头时，图片解析不对
- 修复树节点上配置的表格刷新界面行为刷新了整个树，改成只刷新这个节点的子节点数据
- 修复应用模型不存在getAllPSAppDEUIActions时代码报错。
- 修复卡片部件删除后刷新时过滤参数异常

## [9.0.1.32] - 2023-10-08

### Added

- 支持预置模型补充模式，根据模板扩展一些默认模型
- 卡片，表格，树选择视图补充搜索表单相关布局模型
- 树刷新(包括刷新父节点，刷新全部)之后，保留原有的展开和选中
- 代码表服务支持禁止选择
- 导航占位支持配置导航模式
- 编辑类视图里的界面行为如果是单项数据的时候，在执行之前需要校验一下表单数据，通过后才能执行
- 选择类编辑器适配代码表的禁止选择，禁用部分选项
- 分割面板容器支持隐藏子面板

### Changed

- 树除了一开始的那一次，后面的刷新都不会触发视图loading
- 视图标题配置图标不展示分割线

### Fixed

- 修复element-plus的下拉，复选框的禁用态样式异常
- 修复有数据无值时，表格列聚合异常
- markdown 编辑器，表单项更新后未回填
- 修复树表格视图工具栏点击新建报错
- 修复表格部件排序属性未正确设置异常
- 修复导航占位非路由情况下启用缓存仍加载数据
- 修复split分割面板组件内容溢出异常
- 修复markdown预览时出现三个滚动条
- 修复搜索表单按钮和项高度不对齐

### PackageUpgrade

- axios@1.5.1
- ramda@0.29.1
- vue-i18n@9.5.0
- vue-router@4.2.5
- monaco-editor@0.44.0
## [9.0.1.30] - 2023-09-27

### Added

- 支持部件参数解析
- 导航栏支持缓存参数配置
- 新增门户菜单控制器
- icon组件识别直接内容是svg字符串的情况

### Changed

- 界面行为操作确认改为警告模式
- enableExpCache 变更为 expCacheMode 配置进行缓存的导航视图清单
- 操作确认框设置类型参数，并优化呈现

### Fixed

- 服务层后台返回无值时为空字符串，作无值处理避免异常
- 修复自定义布局面板各项调整：栅格遮罩高度异常、左侧清单默认全部展开、清单和设计区分别是自身滚动条
- 修复模态，气泡的层级异常
- 修复卡片打开的视图没有背景色，和一些样式变量使用错误
## [9.0.1.29] - 2023-09-26

### Added

- 格式化支持若干[时间格式](https://github.com/13601313270/vue-format#16%E6%97%B6%E9%97%B4%E5%92%8C%E6%97%A5%E6%9C%9F%E4%BB%A3%E7%A0%81)
- 支持预置模型补充模式，根据模板扩展一些默认模型
- 新增全局配置存储服务 ConfigService
- 应用级、实体服务、hub 新增配置存储服务 configCache
- 实体逻辑，界面逻辑的源值属性支持xxx.aaa的脚本形式取值
- 新增自定义看板控制器
- 门户部件控制器新增销毁方法
- 后台调用的确认提示信息和成功提示信息支持脚本模式，可以通过${}来取上下文，视图参数，操作数据的属性
- 新增树表格视图
- 新增树表格视图（增强）
- 拦截本地模式下多数据加载行为
- 新建逻辑补充参数 srfuf=0，在打开视图前做特殊处理上下文。避免同实体打开导致界面成为编辑非新建
- 提供全局的工具类，处理错误异常的报错和提示。支持外部注册自定义的异常处理器
- 支持自定义看板视图
- 登录页支持应用标题、记住我功能
- 表格部件代码抽取：表格绘制、表格基础逻辑、表格props
- 数值框编辑器识别实体属性的精度和编辑器参数的精度
- markdown编辑器根据配置的最小高度，限制cherry插件的高度
- 表单分页面板适配
- 树节点上下文菜单padding调整与element按钮下拉时一致
- 表单项容器padding改为上下各8px，与按钮对齐

### Changed

- 使用全局工具类的异常处理处理全局监听的未处理异常。
- 注册无权限的异常处理器
- 实体逻辑，界面逻辑的逻辑参数的参数类型为数据对象变量时，配置的参数属性转小写使用
- 数值转换从controlVO转义到服务层的AppDataEntity里去做
- 项启用，显示，空输入逻辑的脚本返回值默认强转一次boolean
- 树节点启用排序属性后，如果未指定排序方向默认给 asc
- 修复表格拷贝数据置空引用数据主键导致数据异常
- 调整数据选择和span编辑器，打开链接视图时，默认上下文里给的srfkey的顺序，在自定义导航参数处理之前
- 调整 element-plus 下拉悬浮框按钮间距

### Fixed

- 修复界面逻辑link的linkMode默认时给undefined而不是0，导致连接下一个节点判断错误
- 修复表单分页面板下的表单项保存不上问题
- 修复工具栏的项显示逻辑在无数据的时候不判断的问题
- 修复树节点加载部分节点接口报错不提示
- 修复多数据删除后台接口报错，前台显示删除成功，没有显示报错
- 修复多数据视图拷贝数据无效
- 解决dashboard换行空隙问题
- 解决markdown编辑器工具栏不显示问题
- 表单分页面板 header 区 padding 异常
- 分页导航视图，导航区样式异常导致导航栏未与标题对齐
- 修复项布局面板外部数据变更，内部界面刷新的问题

### AddedPackage

- vue-grid-layout@3.0.0-beta1
- vue-text-format@3.1.0
## [9.0.1.28] - 2023-09-21

### Added

- 面板成员支持项逻辑
- 图片控件上传按钮补充展示图标

### Changed

- 项逻辑匹配忽略大小写
- 工作流匹配对应操作视图时使用左包含匹配，不需要完全匹配
- 工具栏的按钮除了预置、后台调用，工作流后台调用并且显示处理提示是 true 的时候会显示 loading，其他情况如前台调用等按钮点击就不会显示 loading 状态
- 面板按钮显示启用逻辑在成员的基础上考虑界面行为权限的显示与禁用，权限的优先级最高
- 卡片视图移除可收缩功能
- 时间选择器类型为 DATEPICKEREX_NOTIME 时，不展示图标

### Fixed

- 修复登出时会闪现原默认的登录页异常

### PackageUpgrade

- dayjs@1.11.10
- @floating-ui/dom@1.5.3
- cherry-markdown@0.8.26
- element-plus@2.3.14
- vue-i18n@9.4.1
- vue-text-format@3.0.2
## [9.0.1.27] - 2023-09-20

### Added

- index.html 补充禁止缓存 meta
- 打包时 vite 插件给 index.html 所有脚本文件补充时间戳避免缓存
- 表格列支持新建，更新默认值
- 表格列行编辑取消时还原修改前的数据
- 分组状态新增选中数据与按钮状态，新增分组界面行为相关逻辑
- 结束节点没配置返回值类型不做处理
- 分页导航面板支持根据视图参数 showMode 决定是否显示图片以及文本
- 卡片支持分组界面行为组
- 分页导航面板方向支持 上|下|左|右
- 面板容器支持内容直接样式

### Changed

- 分组工具栏点击处理逻辑位置从看板迁移到卡片基类
- 动态样式表适配多种返回值格式，数组，对象，字符串。
- 多数据和表单部件默认自己加载，部件补充 loadDefault 输入参数默认为 true。标准引擎视图指定为 false
- 看板、卡片分组界面行为组绘制修改
- 表格操作列图标和文字样式间距补充

### Fixed

- 修复input输入框编辑器数值为0时不显示异常
## [9.0.1.26] - 2023-09-18

### Added

- 实体、UI逻辑遇到直接值赋值需要判断是否为布尔值
- 抽出直接值转换工具类，目前支持转布尔和数字
- 补充多数据新建的批添加处理逻辑。

### Fixed

- 修复有子实体dto的时候post方法参数传递不正确
- 复选框、单选框、下拉选择框编辑器只读状态下文本根据代码表转换的兼容数字类型
- 表格绘制放在加载数据之后，避免一些element table的prop无效

## [9.0.1.25] - 2023-09-15

### Added

- 新增视图全局配置 enableExpCache 全局导航是否启用缓存功能
- 视图，部件适配器添加控制器替换能力
- 视图，部件添加 provider 的props, 上层绘制时传递 provider

### Changed

- 数字框精度以表单项那边配置的为准
- 标签代码表高度调整
- 导出组件样式调整
- 表格编辑时输入框不需要撑满高度100%
- 图片控件显示比例缩放，图片预览更换展示组件
- navPos 识别 enableExpCache 全局配置参数

### Fixed

- 修复数值属性初始值没有转换
- 修复导航视图路由打开时给了 srfnav 但是并没有下级路由时，没有自动打开对应下级路由
- 在开发态下，树右键菜单无法呈现
- 修复导航栏宽高识别失效
## [9.0.1.24] - 2023-09-13

### Added

- 上下文或者视图参数转换，支持字符串模板模式
- 编辑表单在保存或者删除数据后，发送数据变更消息
- 多数据部件，监听数据变更消息。在监听到部件所对应的实体数据发生变更时刷新数据
- 支持实体逻辑脚本代码
- 搜索表单当焦点在搜索表单中表单项时应当支持回车搜索
- 识别部件通用的高宽配置

### Changed

- 导航上下文和视图参数转换，取值顺序改为 data => viewParams => context
- 面板容器下的 row 不出横向滚动条
- 路由打开视图，不再等待返回值。默认直接结束行为状态

### Fixed

- 修复 ControlVO 里数值类型的属性赋值空字符串的时候转换为 0 的 bug
- dto 在回填时，若未给值则设置为空数组。避免非临时数据在非路由下多次新建时的缓存冲突
- 修复表格行超出后样式 tooltip 异常，配置 tooltip 背景为 light
- 修复mpicker编辑只读状态数据展示不正常
- 修复单选编辑器选中无法回显
- 修复代码表选择子代码项时展示不正常
## [9.0.1.23] - 2023-09-12

# Added

- 支持面板项编辑器抛值改值
- 工作流支持后加签
- 表单项支持控件宽高识别

### Fixed

- 修正 hub 模式下的样式加载，hub.json.css 改为 hubsubapp.json.css
- 修正代码编辑器，异步加载后值显示异常

### PackageUpgrade

- @floating-ui/dom@1.5.2
- cherry-markdown@0.8.25
- element-plus@2.3.12
- monaco-editor@0.43.0
- vue-i18n@9.4.0
- typescript@5.2.2
- axios@1.5.0
## [9.0.1.22] - 2023-09-11

### Added

- 支持界面逻辑的视图部件事件触发、视图部件调用，抛出异常、实体数据集、实体处理逻辑、重置参数、拷贝参数、绑定参数、附加到数组参数、排序数组参数、重新建立参数等逻辑节点
- 支持实体kanban视图和kanban部件
- controlVO识别数据类型，数值型的赋值时强制转换成数值
- 支持表格支持列拖动
- 支持数据选择下拉编辑器右侧图标
- 支持编辑视图&操作视图 预制行为load
- 支持布局面板属性项直接内容编辑器配置编辑器参数
- 支持实体kanban视图和kanban部件
- 表单下关系界面识别遮罩模式和遮罩信息

### Fixed

- 修复表格保存弹两次提示。
- 修复表单保存后未刷新关系界面异常
- 修复前端主键无法置空
- 值规则没有指定属性名称时使用该表单项的name
- 表单数据置空时，DTO 打包异常导致保存后数据没有清空
- 在编译后模态飘窗等组件，报错后无提示问题
- 修复资源路径的二级页面刷新后，在点击首页菜单，菜单打开的路由计算时会带上那个资源上下文，导致后打开的多数据视图过滤有问题
- 修复布局面板属性项直接内容编辑器中参数是JSON字符串时，无法转换handlebars模板

### Changed

- 界面逻辑目标属性支持大小写
- 关系界面初始化调用刷新改成加载
- 模态和抽屉关闭按钮样式位置调整
- 应用标题栏样式修改
## [9.0.1.21] - 2023-09-08

### Added

- 应用级直接预置缓存视图，不再发出独立请求
- 添加视图调用标识，提供默认加载的标识。多数据视图引擎识别该属性进行初始化加载。

### Fixed

- 嵌套包数据，是否为本地临时模式判断异常。导致子数据未正确显示

### Changed

- 应用级 loading 抽出公共操作方法
- 跳转登录页后，页面直接 F5 刷新。用于加载无权限模型
- 所有操作应用级显示隐藏，全改调用工具类操作
## [9.0.1.20] - 2023-09-07

### Added

- 识别NoticeError并处理，弹出对应的提示信息
- 添加数据容器判断辅助方法
- 支持多表单模式下打开多表单属性对应的编辑页
- 支持部件消息和语言资源修改部件的行为成功和失败的提示信息
- 支持面板的多项数据容器

### Fixed

- 修正样式加载时，报错无提示导致应用样式加载失败
- 修复属性name和codeName不一致时排序不生效，排序用实体属性的name。
- 修复事件触发器eventNames分割不正确异常
- 修复临时数据模式下前端主键丢失
- 修复某些情况下，模型给了默认视图引擎，应用实体门户视图没注册的问题

### Changed

- 首页导航呈现样式优化
## [9.0.1.19] - 2023-09-06

### Added

- 在未登录情况下，加载无权限模型 PSSYSAPP.simple.json
- 支持在不同模式下，加载全局模型应用样式
- 应用实体对象，补充 srfsourcekey 属性。避免前端使用时不知道是否为真实数据
- handlebars 新增助手 jsonParse
- 支持标题栏配置icon，调整与文本间间距

### Changed

- 路由守卫规则调整，在未登录情况下开始初始化无权限模型
- 全局模型应用样式，识别是否有权限和是否为hub模式。来请求具体的样式文件
- dataChangeNotify报错只throw第一个子的error
- 支持表单项更新的脚本代码模式，调整规范表单项更新和表格编辑项更新的脚本代码用法，需要返回一个对象

### Fixed

- 修复树部件选中数据不是完整的节点数据的问题
- 临时数据判断异常，在非临时数据模式下给了临时主键。导致新建时走了更新
- 修复导航栏没配高宽时，导航栏布局高宽没有用默认布局那边的高宽

## [9.0.1.18] - 2023-09-05

### Added

- 新增消息中心机制，识别 command 指令的 create、update、remove 消息
- 支持应用流程跟踪视图
- 导航删除之后如果数据为空，导航占位显示空白
- 根据首页 viewStyle 设置主题（适配omni-oa主题）
- 多数据部件容器没有标题时需要将添加按钮那行悬浮下去，并且第一个内容的删除按钮也往下移动一段距离

### Changed

- DTO 打包时 data 已经给的 DTOS 数据不再进行处理
- 表格行编辑触发时不再选中数据

### Fixed

- 表格属性列值类型为简单值时不转换文本
- 修复多数据删除后state的items删除错误
- 修复搜索触发的加载时没有重置分页导致加载不到数据，改成搜索触发reload
- 修复列表部件size分页大小不正确异常
- 修复markdown编辑器最小高度失效
- 调整栅格高度不拉伸实现，降低权重，修复部分场景的样式异常。
- 修复表单分组结构错误，内容区没有撑满
- editview3 内容区 padding 不正确
- 退出登录按钮失效
## [9.0.1.17] - 2023-09-04

### Added

- 表单保存时根据表单项过滤数据
- 支持表格编辑列更新脚本代码
- 支持表单选择数据视图
- 面板成员支持自身的对齐模式
- 支持界面行为消息弹窗节点和调试调试逻辑参数节点

### Changed

- 实体服务中，行为只有 actionType=BUILTIN 时才走前端临时数据模式，数据集只有 dataSetType=DATAQUERY 时才走前端临时数据

### Fixed

- 修正在开发模式下 vite 编译顺序问题导致开发态打开界面无法正常加载问题
- 表格有固定列式样式异常，能看到被覆盖的内容
- 修复表格行编辑气泡隐藏的时候，默认会在最后一行显示，且背景色透明的时候会被看到
- 编辑视图保存之后，关闭视图返回 ok 状态为 true。避免前一个界面刷新有问题状态不正确

## [9.0.1.16] - 2023-08-31

### Added

- 支持表格的固定列配置，操作列默认固定
- 导航视图删除之后，默认选中第一条导航。
- 支持表格聚合值格式化
- 支持代码表文本样式
- 导航类视图支持通过导航栏部件的高宽配置分割容器占比
- 支持表格的固定列配置，操作列默认固定
- 支持代码表文本样式
- 支持placeholder占位控件

### Fixed

- 路由打开工具方法不等待的，默认认为处理成功。返回成功状态值，避免状态识别异常
- 拷贝文本工具方法无权限时拷贝失败异常
- 树节点只点击右键菜单按钮，导致节点被激活
- 修复选择树选中数据后抛值不正确导致picker编辑器无法回显问题
- 修复表单嵌入导航视图未自动加载问题
- 工作流按钮文本内容未显示异常

### Changed

- 导航视图引擎继承多数据视图
- 表格悬浮和当前行颜色更改更深一号的颜色
- 导航栏头部标题样式调整
- 工具栏按钮样式调整
- 文本拷贝操作提示信息调整
## [9.0.1.15] - 2023-08-31

### Added

- 支持表格列数据格式增强的相关文本显示的格式化
- 支持快速分组
- 视图关闭逻辑，modal 补充忽略关闭检查功能
- 界面行为关闭视图前，将视图设置为忽略关闭检查
- 新增handlerBars一系列助手
- 编辑器样式变量统一
- searchBar支持快速分组
- input输入框编辑器识别宽度和高度配置
- 快速搜索和编辑表单 input 补充 clean 功能

### Changed

- 服务层发送请求时，put、post 在 data 有值时给 data 无值时给 params
- 表单关系界面只在表单加载之后刷新。
- 后台调用的界面行为，给服务层传参的时候，视图参数只传转换过后的，且把视图参数合并到每一项数据里去往服务层传
- 界面关闭操作确认，确认按钮改为异常色
- 门户部件标题头部样式调整
- 表单分页 tabs 头底部 margin 调整
- markdown 编辑器默认处于纯编辑模式和默认不 focus
- 搜索表单和分组面板样式调整

### Fixed

- 修复 onCreated 事件抛出前控制器就被销毁，导致控制台报错
- dtos 打包时子数据无值给了空数组，改为无值不给
- 开关值显示问题
- 工具栏按钮 loading 出现异常滚动条
- 树节点刷新后 ui 组件呈现刷新异常
## [9.0.1.14] - 2023-08-30

### Added

- 补充 handlebars 工具类，支持字符串模板绘制
- 支持首页搜索框呈现，根据首页不同的菜单方向决定不同样式
- 支持devtool调试工具，快捷键: ctrl + F12

### Changed

- 编辑器参数不再全转小写
- 编辑器请求传上下文和参数只传配置的导航参数转出来的
- 界面行为后台调用时只传配置了参数转换的视图参数
- 复数转换，补充额外的特殊复数转换 ex => ices

### Fixed

- 修复实体关系路径计算逻辑多条分支互相影响的问题
- 修复某些情况下表格列顺序异常
- 表单新建保存的时候数据带不到后台
- 修复图表报错，图表模型配置的属性是 name，需要映射对应的实体属性来使用，兼容自定义的字段名，如 srfcount
- 修复多数据和导航视图资源路径上下文里带了自身实体的主键
- 抽屉的关闭图标点不了导致无法关闭
- 修复表格等滚动条无颜色问题
- 修复复选框 selectValue 配置，在数据是数值类型的时候匹配不到
- 修复分页导航视图在没有实体主键时q请求实体数据接口报错
## [9.0.1.12] - 2023-08-25

### Added

- 是否启用了多语言环境参数
- 添加数据类型辅助工具类
- 补充计数器适配器机制
- 补充表单多数据的加载，加载草稿，删除，保存行为相关事件接口和触发
- 支持表格列属性格式化
- 多语言适配懒加载模式
- 分页标签导航样式调整
- 表单、面板按钮、树节点图标、门户部件样式调整
- 搜索表单识别按钮样式和按钮位置
- 图表单序列时不出图例
- 搜索栏、导航栏快速搜索的占位符取实体搜索属性组成

### Changed

- servicePath 兼容性处理，非必须全满足资源路径关系也进行资源路径拼接
- 部件控制器抽到runtime包里
- 搜索表单加载草稿不走后台，直接返回视图参数
- 重复器逻辑重构
- 菜单控制器支持顶级打开视图参数
- 面板成员计算动态逻辑用数据父容器的数据
- 数据容器里的成员的控制器由数据容器创建管理
- 部件控制器抽到runtime包里，组件库使用runtime包里的控制器来绘制界面。统一移动端与PC端部件控制器实现
- 表格导出功能提供全局工具类接口，由组件库注入实现
- 重复器逻辑调整
- 数据容器里的成员绘制和控制器由数据容器来管理
- 应用菜单样式呈现优化细节

### Fixed

- 修复脚本代码视图参数找不到
- 代码表没有配置size的时候，这更视图的视图参数会带上修改过后的size
- 修复有搜索栏部件模型，且禁用快速搜索时，标题头部没有隐藏
- 修复html编辑器回显会置空属性值
## [9.0.1.11] - 2023-08-23

### Added

- 资源路径计算排除递归循环关系
- 树导航添加 noNeedNavView，外部决定导航视图的时候，允许树不配导航视图。
- 补充插件模型的适配器标识识别
- 适配界面行为配置的预定义界面行为。适配界面行为的刷新引用视图模式。
- 表单、表格控制器接口增加值规则校验方法
- 更改表格编辑模式默认为 row
- 数据选择、地址栏编辑器参数增强相关
- 支持实体多项数据选择视图（左右关系）
- 支持分割面板容器
- 非路由打开视图标题样式调整
- 图表默认 siz e改为 1000
- 表单多数据部件项支持值规则校验
- 支持自动保存，保存校验不通过不弹 message
- 导航栏补充通用 header 容器组件

### Fixed

- 修复预置直接内容数据渲染不出来问题
- 修复表单多数据项引用表格新增无效
- 修复表单多数据项引用表单 srfkey 异常
- 修复多数据部件的表格，新建行没有默认开启行编辑。
- 修复行编辑模式下，最后一行的气泡被遮住
- 修复实体多项数据选择视图引擎，部件 name 大小写不一致导致的参数传递失效。
- 修复导航视图本身的视图参数传递到下一级视图里去了

### Removed

- 删除选择视图面板 onPickUpViewMounted 事件

### Changed

- 调整实体数据选择视图（左右关系）实现逻辑，与实体多项数据选择视图（左右关系）保持一致，简化视图引擎逻辑。
- 表单逻辑判断新建还是修改变成看数据的状态。
- 调整树刷新子节点方法，识别界面行为的刷新引用视图模式，支持刷新当前节点的子，当前节点父的子和根节点的子
## [9.0.1.9] - 2023-08-21

### Added

- 补充上下文菜单接口
- 补充全局控制器 HubController
- 全局控制器、视图控制器，补充 session 共享数据对象
- 支持脚本代码预置参数，支持异步
- 选择多数据视图接口
- 支持上下文菜单的预置项逻辑控制显示和禁用

### Changed

- 调整打开视图的接口，统一用视图id

### Fixed

- 修复预置项逻辑逻辑错误
- 模型填充 appId 改为递归模式，避免漏填模型所归属应用
## [9.0.1.8] - 2023-08-20

### Added

- 补充 dayjs 插件外部依赖映射和资源文件
- 支持树节点的图标配置，图标属性
- 支持实体树节点的图标和文本的脚本代码呈现
- 搜索表单项无值时优化传参
- 获取编辑器适配器时新增预置类型相关判断
- 工作流link接口新增id标识
- 支持多数据静默删除
- IOpenViewUtil 补充 push 方法，直接根据路径打开界面
- 表格列支持脚本代码
- 支持编辑器预置类型
- 支持表格行编辑的单行编辑模式
- 支持行保存，表格全保存，表格行编辑切换等预置界面行为
- 标签支持代码表颜色
- 支持数据视图和列表的默认排序
- 支持树节点刷新界面行为

### Changed

- fontAwesome图标更改，版本由6.2.0改成4.7.0
- 认证服务标准化，提供 login、logout 方法
- 表格行编辑相关接口，事件调整
- 脚本执行改为闭包，避免被注入
- 第一次设置默认排序由多数据部件基类触发

### Fixed

- 重定向自定义属性值为数值时报错，refview 没有 name 时报错
- 修复实体属性类型是 DTOS 但 refAppDataEntityId 不存在时报错
- 修复数据视图项点击触发两次
- 修复导航 query 空值也传递，导航参数处理逻辑用的数据对象错误
## [9.0.1.7] - 2023-08-14

### Added

- 视图逻辑支持部件事件触发类型
- 支持界面逻辑的绑定参数逻辑节点
- 栅格容器支持自适应列
- 多语言实现挂载 iBizSys 并导出 vueI18n 实例
- 支持快速搜索的占位符根据属性的 enableQuickSearch 从实体属性中获取
- 模态打开选项操作视图时支持脏检查
- 新增confirmUtil，用于区分不同类型的确认框提示

### Fixed

- 部件销毁时事件销毁，等待销毁事件执行完毕再销毁。避免时机问题导致报错
- 修正 method.dto 参数合并，当参数为 undefined 时异常
- 修复导航打开的视图是重定向视图时无法强制使用路由模式打开
- 数据视图事件监听超过 300 导致报错界面呈现异常
- 修复树根节点为静态节点时重复加载
- 修复树搜索之后树节点绘制不刷新
- 修复 markdown 编辑器一个页面多个时无法显示的问题
- 修复树没有过滤项配置时出现 n_undefined_eq
## [9.0.1.6] - 2023-08-11

### Added

- 新增部件占位监听对应部件的事件并转发为面板事件
- 导航占位部件可以配置监听事件的部件，不配默认监听所有部件的导航视图变更事件。

### Changed

- 调整优化导航相关逻辑，使用导航事件触发，导航占位部件监听事件变更
- 依赖包升级: @floating-ui/dom@1.5.1、cherry-markdown@0.8.22、echarts@5.4.3、element-plus@2.3.9、pinia@2.1.6

### Fixed

- 部件注册名称出现空值，改为优先取 name 无值取 id
- 修复dto参数转化时非应用实体属性丢失
- 多层级请求路径计算，大于二级计算丢失
- 视图注册部件插槽时，无 name 取部件 id 作为标识
- 修复树节点关系节点绘制异常
- 修复图表组件加载慢导致视图和部件的生命周期对不上，使用defineAsyncComponent的loadingComponent，在loadingComponent里面提前预告部件。

## [9.0.1.5] - 2023-08-10

### Added

- 新增日历视图
- 新增日历导航视图

### Changed

- openData如果有事件给的context，params,优先使用事件的而不是视图的。
- 调整树相关接口，onActive多传树节点数据，根节点变成数组等。
- 调整导航栏计算导航相关逻辑，优先使用多数据部件抛出来的context和params
- 调整树部件onActive抛出的参数，抛出基于节点数据的全量的context和params，以适配多数据相关通用逻辑。
- 调整树的加载相关逻辑，根节点变成数组，支持动态的根节点。

### Fixed

- 路由首页资源路径计算缺少父层级
- 修复树导航视图导航视图过滤参数不对。
- 修复树默认展开，回显展开。
## [9.0.1.3] - 2023-08-09

### Added

- 多层级路由支持到6级
- 添加表格列的列状态接口，用于控制列排序和显示与否。
- 在表格State里添加表格聚合的相关的数据接口声明
- 容器布局计算，高度和宽度在值大于0小于1时，按照百分比分配
- 支持表格启用分组，代码表分组和自动分组。分组第一行呈现第一条数据。展开后呈现其他数据。
- 支持表格当前页聚合，支持聚合当前页的数据并呈现于表格最下面一行。
- 优化树部件和el-tree的交互逻辑，当el-tree请求加载的数据部件已经存在，不重复请求后台，直接返回给它需要的节点数据。
- 门户部件容器支持高、宽配置

### Fixed

- 自定义重定向类型属性，识别不区分大小写
- 修复多数据loadMore频繁加载，没有等待上一次请求。导致请求了超过总数的分页。
- 应用标题在顶部时，无图标状态下 padding 修正
- 表单分页标题未显示
- 修复树节点显示根节点时节点无法正常绘制的问题。
- 卡视图 flex 下未自动换行
- 修复某些情况下树节点点击节点展开时会导致树收起来。

### Changed

- 外部依赖 vue 使用 [fork分支](https://github.com/neko-chilyann/vue3/tree/3.3.4-keep-alive) 扩展包，修改 keep-alive 支持 isKey 模式
- 表格未指定编辑视图时，只 log 警告不报模型错误
- 所有导航占位部件，切换为原生 keep-alive 并补充 prop isKey，来实现 key 模式的缓存
- 样式: 顶部应用菜单，在点击后不显示激活项
- 调整导航树节点回显逻辑，通过传递给树部件defaultExpandedKeys，树节点初始化加载的时候会把所有默认展开节点的子数据一起加载回来。然后树导航设置选中节点即可完成回显。
- 图表自定义参数非 json 格式时，则直接赋值。避免非 json 格式参数转换异常
- 树节点查询的时候子节点过滤项拼接n_xxx_eq

### Removed
- 调整树state的接口，删除expandedKeys，添加defaultExpandedKeys
- 调整树控制器的接口，删除setExpandedKeys方法
- 删除扩展组件 IBizKeepAlive
## [9.0.1.2] - 2023-08-06

### Fixed

- 选择链接编辑器样式调整
- 修复表格列的对齐方式配置了没效果
- 修复树导航栏未配置嵌入视图不计算导航参数

### Added

- 支持选择视图（左右关系）
- 选择视图面板抛出嵌入视图mounted事件
- 选择视图新增prop `noLoadDefault` 嵌入视图 不默认加载
- 新增表单分组面板展开与收起图标，方便识别
- 支持面板的单项数据容器可以通过实体行为，实体逻辑，实体数据集，全局应用变量的方式获取数据来源。
- 多数据视图加载事件参数增强
- 选择视图面板事件接口新增 onPickUpViewMounted 事件
- 树导航栏部件控制器接口新增 getNavViewMsg 事件
- 选择视图面板部件控制器新增 embedView 属性
- 实体逻辑补充通过逻辑id执行的公共函数
- 补充实体逻辑和UI逻辑模块的导出

### Changed

- monaco-editor@0.41.0
## [9.0.1.1] - 2023-08-03

### Added

- 面板按钮识别按钮样式
- 索引关系选择数据视图（部件视图）视图引擎
- 实体选择数据视图视图引擎
- 非 dev 模式下不显示未提供的部件占位信息
- 实体选择数据视图布局面板
- 实体索引关系选择数据视图（部件视图）布局面板
- element-plus 按钮类型 primary、info、success、warning、danger 适配主题模式

### Changed

- 选择视图、操作视图、工作流启动视图、工作流操作视图，布局按钮确认和取消更换前后顺序，并改为主要按钮和信息按钮

### Fixed

- 分页导航视图，在浏览器刷新后页面界面异常，出现空白

## [9.0.1.0] - 2023-08-2

### Added

- init
